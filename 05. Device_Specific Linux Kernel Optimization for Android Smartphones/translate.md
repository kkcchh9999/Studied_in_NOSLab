# 안드로이드 스마트폰을 위한 특정 장치 리눅스 커널 최적화
## Device_Specific Linux Kernel Optimization for Android Smartphones

## Abstract
스마트폰을 더 강력하게 만들기 위해, 연구자들은 모바일 시스템과 어플리케이션 성능을 향상시키기 위한 많은 기술을 제안했다.
가장 인기있는 모바일 OS인 안드로이드는 리눅스 커널을 기반으로 만들어 져 있다. 
그러므로, 커널 성능을 최적화 하는 것은 잠재적으로 안드로이드 스마트폰의 성능을 향상시킬 수 있다.  

이 논문에서는, 안드로이드 스마트폰의 장치별 리눅스 커널의 구성을 최적화하는 컴파일러 기반의 접근을 제안한다.
장치의 런타임 피드백을 활용하는 것으로, 우리는 컴파일러가 프로필 기반 최적화(Profile-Guided Optimization, PGO)하도록 지시할 수 있고, 특정 장치에 대한 리눅스 커널 이미지 최적화를 제공할 수 있다. 이 이미지는 제조 시 장치와 함께 제공되거나, 나중에 전체 시스템 업데이트에서 릴리즈 될 수 있다.
우리가 아는 한, 이 논문은 성능 향상을 위해 PGO를 안드로이드 스마트폰의 리눅스 커널에 성공적으로 적용한 최초의 연구이다.   

우리는 다른 세 가지의 안드로이드 스마트폰에서 실험을 진행했다: Nexus 5X, Nexus 6, Nexus 5.
결과적으로 각각 평균적인 성능이 11.1%, 4.1%, 9.3% 상승하였다. 
특히, 우리는 멀티쓰레드, 스케줄링, 바인더, 스토리지와 파일시스템 같은 핵심 안드로이드 시스템 컴포넌트의 성능 향상을 관측했다.

## 1. Introduction
스마트폰의 빠른 확산은 모바일 컴퓨팅의 번영을 이뤘다. 
장치의 크기와 배터리 제약으로 인해, 스마트폰의 연산 능력은 데스크탑이나 서버에 비해 아직 제한되어 있다.
더 정교한 어플리케이션을 지원하기 위해, COMET나 Uniport같은 모바일 클라우드 컴퓨팅 기술이 제안되어 강력한 클라우딩 컴퓨팅 인프라를 모바일 장치에 통합했다.
반면, 많은 연구들은 모바일 시스템과 어플리케이션의 성능 최적화를 수행한다.
예를 들어, F2FS는 플래시 스토리지를 위한 파일 시스템 성능을 향상시킨다.
SmartIO는 스마트폰의 iowait 지연을 줄인다. 
PerfChecker는 스마트폰 어플리케이션의 성능 버그를 탐지한다.   

모바일 OS의 가장 높은 점유율을 가지는 안드로이드는 리눅스 커널 기반이다. 
커널 성능은 전체 시스템 효율에서 중요하기 때문에, 리눅스 커널의 성능 최적화는 그 위에서 동작하는 안드로이드 어플리케이션을 가속할 수 있다.
이 논문에서, 우리는 안드로이드 모바일 장치를 위한 기기별 리눅스 커널 최적화를 위해 컴파일러 기반의 접근 즉, PGO를 채택했다.
최적화된 커널을 사용함으로, 우리는 멀티쓰레드, 태스크 스케줄링, 바인더 인터 프로세스 통신, 스토리지와 파일입출력 등의 중요한 안드로이드 시스템 컴포넌트의 성능을 향상시킬 수 있다.   

우리의 이전 연구는 PGO 기술을 사용해 리눅스 커널을 최적화 하는것이 x86 기반의 기기에서 실현 가능한 것을 증명했다. 
이 논문에서는, 우리는 성공적으로 PGO 기술을 안드로이드 스마트폰의 리눅스 커널에 적용했다. 
x86 기반 기기에서 수행한 어플리케이션별 커널 최적화와 다르게, 우리는 안드로이드 스마트폰을 위한 장치별 커널 최적화를 겨냥했다.    

장치별 최적화된 리눅스 커널은 새로운 혹은 기존의 장치에 대해 최적화 될 수 있다.
이는 새로운 장치가 제조될 때 함께 제공될 수 있다.
혹은 기존 장치에 대해, 시스템 업데이트시 제공될 수 있다.
계측된 모바일 장치의 리눅스 커널을 실행 그리고 적절한 프로필 피드백을 수집함에 의해 우리는 컴파일러, 즉 GCC 에게 향상된 최적화를 수행하고, 각 장치에 최적화된 리눅스 커널 이미지를 생성하도록 지시할 수 있다.  

우리의 주요 기여는 아래와 같다.
- 컴파일러 기반 접근을 통해 안드로이드 스마트폰을 위한 장치별 리눅스 커널 최적화를 제시한다. 실제 최적화 과정 동안, 유저는 커널에 대해 어떠한 수동적인 수정을 진행할 필요가 없다.
- 우리는 제안된 최적화를 구현하고, 안드로이드 커널 성능을 측정했다. 
세 가지 다른 안드로이드 스마트폰에서 우리의 실험을 기반으로 기본 -02 최적화와 비교했을 때, 우리의 접근은 시스템 성능을 4.1 ~ 11.1% 향상시켰다.
- 우리가 아는 한, 이 논문은 가장 최초로 속도 향상을 위해 PGO 기술을 안드로이드 스마트폰의 리눅스 커널에 성공적으로 적용했다. 컴파일러 기반의 접근이기 때문에, 다른 안드로이드 시스템 향상 기법에서도 추가적인 성능향상을 위해 해당 기법을 적용할 수 있다.  

이하의 논문은 다음과 같은 순서를 가진다.
Section 2에서는 리눅스 커널을 최적화 하기 위한 PGO와 GCC 최적화에 대한 배경 지식을 다룬다.
Section 3에서는 안드로이드의 리눅스 커널에 대한 상세한 디자인과 구현에 대해 다룬다.
Section 4는 벤치마크와 실험 환경, 다른 스마트폰에서의 실험 결과에 대해 나타낸다.
Section 5는 관련 연구를, Section 6은 결론을 나타낸다.

## 2. Background
### 2.1 Progile-Guided Optimization (PGO)
PGO는 컴파일러 커뮤니티에서 잘 연구되었다. 
제어 흐름 그래프나 하나 이상의 프로그램 실행에서 수집된 표현 값 프로필 등의 feedback information을 사용함으로 컴파일러는 스스로의 최적화에 집중할 수 있고